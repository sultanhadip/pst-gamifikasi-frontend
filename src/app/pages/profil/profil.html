<div class="page-container">
    <!-- Main Content -->
    <div class="main-content" *ngIf="!showAllAchievements()">
        <!-- Profile Header Section -->
        <div class="profile-card">
            <div class="profile-banner">
                <div class="banner-circle">
                    <div class="avatar-dragon-wrapper">{{ user.avatar }}</div>
                </div>
            </div>

            <div class="profile-header-content">
                <div class="user-main-info">
                    <h2>{{ user.name }}</h2>
                    <p class="user-role">{{ user.role }}</p>
                    <p class="user-join">Bergabung {{ user.joined }}</p>
                    <button class="btn-gelar">PILIH GELAR</button>
                </div>

                <div class="profile-actions">
                    <button class="btn-action-green">
                        <span class="icon">üìù</span> UBAH PROFIL
                    </button>
                    <button class="btn-action-green">
                        <span class="icon">üîë</span> TAMBAH PASSWORD
                    </button>
                    <button class="btn-action-green">
                        <span class="icon">‚öôÔ∏è</span> PENGATURAN
                    </button>
                </div>
            </div>
        </div>

        <!-- Statistics Section -->
        <div class="section-container">
            <h3>Statistik</h3>
            <div class="stats-grid-2">
                <div class="stat-mini-card" *ngFor="let s of stats">
                    <div class="stat-icon-bg">{{ s.icon }}</div>
                    <div class="stat-text">
                        <div class="stat-value">{{ s.value }}</div>
                        <div class="stat-label">{{ s.label }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements Section -->
        <div class="section-container">
            <div class="section-header">
                <h3>Pencapaian</h3>
                <button class="btn-link" (click)="toggleAchievements()">LIHAT SEMUA</button>
            </div>

            <div class="achievement-preview-card">
                <div class="achievement-icon-wrapper shield">üõ°Ô∏è</div>
                <div class="achievement-content">
                    <h4>Membaca 1 Dokumen Statistik</h4>
                    <div class="achievement-progress-row">
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill gray" style="width: 0%"></div>
                        </div>
                        <span class="progress-text">0/1</span>
                    </div>
                    <p>Telah membaca 1 dokumen statistik</p>
                </div>
            </div>
        </div>
    </div>

    <!-- All Achievements View (Screenshot 2) -->
    <div class="main-content" *ngIf="showAllAchievements()">
        <div class="all-achievements-header">
            <button class="btn-back" (click)="toggleAchievements()">‚Üê</button>
            <h2 class="page-title-center">Semua Pencapaian</h2>
        </div>

        <div class="achievements-tabs">
            <button [class.active]="activeAchievementTab() === 'membaca'" (click)="setAchievementTab('membaca')">Membaca
                Data</button>
            <button [class.active]="activeAchievementTab() === 'kuis'" (click)="setAchievementTab('kuis')">Menyelesaikan
                Kuis</button>
            <button [class.active]="activeAchievementTab() === 'level'" (click)="setAchievementTab('level')">Naik
                Level</button>
            <button [class.active]="activeAchievementTab() === 'hadir'"
                (click)="setAchievementTab('hadir')">Kehadiran</button>
            <button [class.active]="activeAchievementTab() === 'papan'" (click)="setAchievementTab('papan')">Papan
                Peringkat</button>
        </div>

        <div class="achievements-list">
            <div class="achievement-full-card" *ngFor="let a of achievements" [class.locked]="a.status === 'locked'">
                <div class="card-top">
                    <div class="achievement-badge" [class.shield-blue]="a.status === 'in-progress'"
                        [class.shield-red]="a.status === 'completed'">üõ°Ô∏è</div>
                    <div class="achievement-info-main">
                        <div class="title-row">
                            <h4>{{ a.title }}</h4>
                            <span class="status-pill" [class.in-progress]="a.status === 'in-progress'"
                                [class.completed]="a.status === 'completed'" [class.locked]="a.status === 'locked'">
                                {{ a.status | uppercase }}
                            </span>
                        </div>
                        <p>{{ a.desc }}</p>
                        <div class="progress-section">
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" [style.width.%]="(a.progress / a.total) * 100"
                                    [class.yellow]="a.status !== 'locked'"></div>
                            </div>
                        </div>
                        <div class="meta-row">
                            <span class="meta-progress">Progress: {{ a.progress }}/{{ a.total }}</span>
                            <span class="meta-reward">Reward: {{ a.reward }} points</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Widgets -->
    <div class="right-widgets">
        <app-stats-ribbon></app-stats-ribbon>
        <app-daily-mission-widget></app-daily-mission-widget>
        <app-search-user-widget></app-search-user-widget>
    </div>
</div>