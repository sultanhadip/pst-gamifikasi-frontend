<div class="page-container">
    <!-- Main Content -->
    <div class="main-content" *ngIf="detail()">
        <div class="top-bar">
            <button class="btn-back" [routerLink]="['/publikasi']">‚Üê</button>
            <h2 class="page-title">{{ detail().title }}</h2>
        </div>

        <div class="detail-card">
            <div class="card-header-icon">
                <span class="coin-icon">üü°</span>
            </div>

            <div class="card-body">
                <!-- Left Column: Image & Buttons -->
                <div class="left-col">
                    <img *ngIf="detail().coverImage" [src]="detail().coverImage" class="book-cover-img-detail">
                    <div *ngIf="!detail().coverImage" class="book-cover-orange">
                        <div class="cover-top">
                            <span class="cover-logo">BPS</span>
                        </div>
                        <div class="cover-title">{{ detail().title }}</div>
                        <div class="cover-footer">2025</div>
                    </div>

                    <button class="btn-read" (click)="onMarkRead()">BACA PUBLIKASI (XP +{{ detail().xpReward }})</button>
                    <button class="btn-quiz" routerLink="/learning/quiz">QUIZ</button>
                </div>

                <!-- Right Column: Info -->
                <div class="right-col">
                    <div class="info-date">
                        <span class="icon-calendar">üìÖ</span> {{ detail().createdAt | date }}
                    </div>
                    <h3 class="info-title">{{ detail().title }}</h3>

                    <div class="meta-grid">
                        <div class="meta-row">
                            <span class="meta-label">XP Reward</span>
                            <span class="meta-value">: {{ detail().xpReward }}</span>
                        </div>
                        <div class="meta-row" *ngIf="detail().fileUrl">
                            <span class="meta-label">File</span>
                            <span class="meta-value">: <a [href]="detail().fileUrl" target="_blank">Download PDF</a></span>
                        </div>
                    </div>

                    <div class="abstract-section">
                        <h4>Deskripsi</h4>
                        <p>{{ detail().description }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Widgets -->
    <div class="right-widgets">
        <app-stats-ribbon></app-stats-ribbon>
        <app-daily-mission-widget></app-daily-mission-widget>
    </div>
</div>